SELECT E.[YEAR],E.TERM,T.NAME,E.TEACHERNO,CAST(AVG(E.RATIO) AS DECIMAL(38, 1)) RATIO,S.NAME SCHOOLNAME FROM EVALUATION_DDPJ E
LEFT JOIN TEACHERS T ON T.TEACHERNO=E.TEACHERNO 
LEFT JOIN SCHOOLS S ON S.SCHOOL=T.SCHOOL 
WHERE E.[YEAR]=:YEAR AND E.TERM=:TERM AND T.NAME LIKE :NAME AND E.TEACHERNO LIKE :TEACHERNO AND T.SCHOOL LIKE :SCHOOL
GROUP BY E.[YEAR],E.TERM,T.NAME,E.TEACHERNO,S.NAME
ORDER BY S.NAME 