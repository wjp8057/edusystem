SELECT STUDENTS.STUDENTNO as xh,STUDENTS.NAME AS xm,SELECTIONS.TOTALCREDITS,lsselection.xkxf as xkxf
FROM STUDENTS
LEFT OUTER JOIN
(
  SELECT STUDENTNO,SUM(COURSES.CREDITS) AS TOTALCREDITS
  FROM SCORES
  JOIN COURSES ON SCORES.COURSENO=COURSES.COURSENO
  WHERE YEAR=:Y1
  AND TERM=:T1
  AND (SCORES.EXAMSCORE>=60 OR SCORES.TESTSCORE ='优秀' OR SCORES.TESTSCORE ='良好' OR        SCORES.TESTSCORE ='及格' OR SCORES.TESTSCORE ='中等' OR SCORES.TESTSCORE ='合格')
  GROUP BY STUDENTNO
)AS SELECTIONS ON STUDENTS.STUDENTNO=SELECTIONS.STUDENTNO
left outer join
(
  SELECT STUDENTNO,SUM(COURSES.CREDITS) AS xkxf
  FROM SCORES
  JOIN COURSES ON SCORES.COURSENO=COURSES.COURSENO
  WHERE YEAR=:YEAR
  AND TERM=:TERM
  GROUP BY STUDENTNO
)AS lsSELECTION ON STUDENTS.STUDENTNO=lsSELECTION.STUDENTNO
WHERE STUDENTS.CLASSNO=:CLASSNO
ORDER BY STUDENTS.STUDENTNO